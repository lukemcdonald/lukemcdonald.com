---
import { Image } from 'astro:assets'

import backgroundImage from '@/assets/images/landscape-tree-fog.jpg'
import Grass from '@/components/Grass.astro'
import Header from '@/components/Header.astro'

function getRandomGrassId(excludeId?: string) {
  const ids = ['1', '2', '3', '4']
  return ids.filter((id) => id !== excludeId)[Math.floor(Math.random() * ids.length)]
}
const leftGrassId = getRandomGrassId()
const rightGrassId = getRandomGrassId(leftGrassId)
---

<div class="bg-primary-50 dark:bg-primary-950 lg:grid">
  <Image
    alt=""
    class="blur-xs absolute left-1/2 top-1/2 hidden h-full max-h-screen w-full -translate-x-1/2 -translate-y-1/2 transform overflow-hidden object-cover opacity-20 grayscale lg:block dark:opacity-15"
    fetchpriority="low"
    loading="lazy"
    quality={70}
    src={backgroundImage}
    style="grid-area: 1/1"
  />

  <Grass
    id={rightGrassId}
    position="right"
  />

  <Grass
    id={leftGrassId}
    position="left"
  />

  <div
    class="text-primary-900 place-items-center lg:relative lg:flex lg:min-h-screen lg:items-center lg:justify-center"
    style="grid-area: 1/1"
  >
    <div
      class="site lg:max-h-site relative m-auto bg-white lg:w-11/12 lg:max-w-screen-xl lg:shadow-2xl"
    >
      <Header />
      <main class="lg:max-h-site lg:flex lg:h-screen">
        <slot />
      </main>
    </div>
  </div>
</div>
