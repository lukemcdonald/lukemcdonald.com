---
interface Props {
  title: string
  items: unknown[]
}

const { title, items } = Astro.props

const hasItemSlot = Astro.slots.has('item')
const hasItems = Array.isArray(items) && items.length > 0

let renderedItemSlots: string[] = []

if (hasItemSlot && hasItems) {
  renderedItemSlots = await Promise.all(
    items.map((item, index) => Astro.slots.render('item', [item, index]))
  )
}
---

<section>
  <h2>{title}</h2>
  {
    hasItems && (
      <ul>
        {hasItemSlot ?
          renderedItemSlots.map((html) => (
            <li>
              <Fragment set:html={html} />
            </li>
          ))
        : items.map((item) => <li>{String(item)}</li>)}
      </ul>
    )
  }
</section>
